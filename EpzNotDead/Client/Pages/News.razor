@page "/news"
@using EpzNotDead.Infrastructure
@inject HttpClient Http

<PageTitle>News</PageTitle>

<h1>News</h1>

<p>This component demonstrates fetching data from the server.</p>

@if (news == null)
{
    <p><em>Loading...</em></p>
}
else
{
    foreach(var item in news)
    {
        <EpzNotDead.Client.Pages.Components.Lead Article="@item" />
    }
    @*<table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Date</th>
                <th>Tytuł</th>
                <th>Wstępniak</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in news)
            {
                <tr>
                    <td>@item?.Id</td>
                    <td>@item?.Created</td>
                    <td>@item?.Title</td>
                    <td>@item?.ShortContent</td>
                </tr>
            }
        </tbody>
    </table>*@
}

@code {
    private EpzNotDead.Infrastructure.Entities.News[]? news;

    protected override async Task OnInitializedAsync()
    {
        news = await Http.GetFromJsonAsync<EpzNotDead.Infrastructure.Entities.News[]>("Articles/News");
    }
}
